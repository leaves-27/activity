webpackJsonp([1],{"+WGh":function(t,e){},"9iFp":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),o=(i("+WGh"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var a=i("VU/8")({name:"App",mounted:function(){}},o,!1,function(t){i("pWEi")},null,null).exports,n=i("/ocq"),r=i("Gu7T"),c=i.n(r),d=i("GQaK"),l=function(){var t=window.innerWidth,e=window.innerHeight;return"number"!=typeof t&&("CSS1Compat"==document.compatMode?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=document.body.clientWidth,e=window.body.clientHeight)),{pageWidth:t,pageHeight:e}};var u=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments[2],o=e.endTime,a=void 0===o?"":o,n=e.productId;if(a){var r=new Date(""+(t=a,t.replace(/\-/g,"/"))).getTime();if((new Date).getTime()>r)return void alert("您选择的此商品活动已过期")}this.$router.push({path:"/good-detail",query:{id:n,source:i,groupId:s}})},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"mask-layer",on:{click:function(e){return t.$emit("menuHide",!1)}}},[i("div",{staticClass:"nav-list-wrapper",class:{active:t.isVisible}},[i("p",{staticClass:"nav-title"},[t._v("目录 "),i("span",{staticClass:"close",on:{click:function(e){return t.$emit("menuHide",!1)}}})]),t._v(" "),i("div",{ref:"nav",staticClass:"nav-container"},[i("ul",{staticClass:"nav-list-content"},t._l(t.menus,function(e){return i("li",{staticClass:"nav-item",class:{active:e.id===t.selectedId},on:{click:function(i){return t.$emit("select",e.id)}}},[t._v("\n          "+t._s(e.desc)+"\n        ")])}),0)])])])},staticRenderFns:[]};var h=i("VU/8")({props:["isVisible","menus","selectedId"],computed:{},methods:{}},p,!1,function(t){i("mOkD")},"data-v-220deec2",null).exports,g=i("mtWM"),v=i.n(g),f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.a.get("http://xh.zjlhhs.com.cn/wap/haibao/info/get",{params:{groupId:t}})},m={name:"poster",components:{Menu:h},data:function(){return{originData:[],selectedId:"1",page:1,isVisible:!1,bs:null,pageHeight:l().pageHeight,height1:0,height2:0,groupId:""}},computed:{menus:function(){var t=this,e=[];return this.originData.forEach(function(i,s){var o=i.actId,a=i.actName,n=t.pages.findIndex(function(t){return 1*t.actId==1*o});e.push({id:o,desc:a,startIndex:-1===n?0:n})}),e},pages:function(){var t=[];return this.originData.forEach(function(e){var i=e.pages;t.push.apply(t,c()(i))}),t},pageWidth:function(){return(1536/(2186/this.pageHeight)).toFixed(0)},pagesWidth:function(){var t=this.pages.length;return this.pageWidth*t}},methods:{getActId:function(){var t=this.$route.query.groupId,e=void 0===t?"":t;return e||this.groupId},goDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getActId(),i=t.isClick;void 0!==i&&i&&u.bind(this)(t,"",e)},goGoods:function(){var t=this.getActId();this.$router.push({path:"/goods",query:{groupId:t}})},initScroll:function(){var t=this;if(this.$refs.poster){var e=new d.a(this.$refs.poster,{scrollX:!0,probeType:3,click:!0,bounce:!0,momentumLimitDistance:5});e.on("scroll",function(e){var i=e.x,s=Math.abs(i);t.page=Math.floor(s/t.pageWidth)+1}),this.bs=e}},getBackgroundImage:function(t){return""},selectHandler:function(t){this.selectedId=t,this.isVisible=!1;var e=-1*this.menus.find(function(e){return e.id===t}).startIndex*this.pageWidth;this.bs.scrollTo(e,0)},getData:function(){var t=this,e=this.getActId();f(e).then(function(e){var i=e.data,s=void 0===i?{}:i,o=s.data,a=void 0===o?{}:o;if(s.success){var n=a.actDetailList,r=void 0===n?[]:n,c=a.groupId;t.originData=r,c&&(t.groupId=c),t.initScroll();var d=(t.menus[0]||{}).id;t.selectedId=d}}).catch(function(t){console.error("error:",t)})},onResize:function(){var t=l().pageHeight;this.pageHeight=t}},mounted:function(){window.onresize=this.onResize,this.bs||this.getData()}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster"},[i("div",{ref:"poster",staticClass:"poster_main"},[t.pages.length>0?i("div",{staticClass:"container",style:{width:t.pagesWidth+"px"}},t._l(t.pages,function(e,s){return i("div",{staticClass:"page"},t._l(e.rows,function(e,s){return i("div",{staticClass:"row",style:{flexBasis:e.height?e.height+"px":"auto",flexGrow:!e.height&&e.rowspan?e.rowspan:1,flexShrink:e.height?0:1}},t._l(e.columns,function(s,o){return i("div",{staticClass:"column",style:{flexBasis:s.width?s.width+"px":"auto",flexGrow:!s.width&&s.colspan?s.colspan:1,flexShrink:s.width?0:1}},[s.rows?i("div",{staticClass:"table"},t._l(s.rows,function(s,o){return i("div",{staticClass:"row",style:{flexBasis:s.height?e.height+"px":"auto",flexGrow:!s.height&&e.rowspan?e.rowspan:1,flexShrink:s.height?0:1}},t._l(s.columns,function(e,s){return i("div",{staticClass:"column",style:{flexBasis:e.width?e.width+"px":"auto",flexGrow:!e.width&&e.colspan?e.colspan:1,flexShrink:e.width?0:1}},[e.rows?i("div",{staticClass:"table"},t._l(e.rows,function(e,s){return i("div",{staticClass:"row",style:{flexBasis:e.height?e.height+"px":"auto",flexGrow:!e.height&&e.rowspan?e.rowspan:1,flexShrink:e.height?0:1}},t._l(e.columns,function(e,s){return i("div",{staticClass:"column",style:{flexBasis:e.width?e.width+"px":"auto",flexGrow:!e.width&&e.colspan?e.colspan:1,flexShrink:e.width?0:1}},[e.product?i("div",{staticClass:"good",on:{click:function(i){return t.goDetail(e.product)}}},[i("img",{attrs:{src:e.product.imageUrl}})]):t._e()])}),0)}),0):i("div",[e.product?i("div",{staticClass:"good",on:{click:function(i){return t.goDetail(e.product)}}},[i("img",{attrs:{src:e.product.imageUrl}})]):t._e()])])}),0)}),0):i("div",[s.product?i("div",{staticClass:"good",on:{click:function(e){return t.goDetail(s.product)}}},[i("img",{attrs:{src:s.product.imageUrl}})]):t._e()])])}),0)}),0)}),0):i("div",{staticClass:"empty"},[t._v(" 暂无活动商品 ")])]),t._v(" "),i("div",{staticClass:"poster_footer"},[i("div",{staticClass:"footer_left"},[i("div",{staticClass:"footer_button menu-block",on:{click:function(e){t.isVisible=!t.isVisible}}})]),t._v(" "),i("div",{staticClass:"footer_middle"},[i("div",{staticClass:"paging"},[t._v(t._s(t.page)+"/"+t._s(t.pages.length))])]),t._v(" "),i("div",{staticClass:"footer_right"},[i("div",{staticClass:"footer_button nav-block",on:{click:t.goGoods}})])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("Menu",{attrs:{menus:t.menus,"selected-id":t.selectedId,"is-visible":t.isVisible},on:{select:t.selectHandler,menuHide:function(e){t.isVisible=!1}}})],1)],1)},staticRenderFns:[]};var _=i("VU/8")(m,w,!1,function(t){i("eOfe")},"data-v-69525be4",null).exports,C={name:"good-detail",data:function(){return{good:null}},methods:{back:function(){var t=(this.$route.query||{}).source;"goods"===(void 0===t?"":t)?this.$router.push({path:"/goods"}):this.$router.push({path:"/"})}},mounted:function(){var t=this,e=this.$route.query||{};(function(t,e){return v.a.get("http://xh.zjlhhs.com.cn/wap/haibao/product/detail",{params:{productId:t,groupId:e}})})(e.id,e.groupId).then(function(e){var i=e.data,s=i.data,o=void 0===s?{}:s;i.success&&(t.good=o)}).catch(function(t){console.error("error:",t)})}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.good?i("div",{staticClass:"goods"},[i("div",{staticClass:"pic-wrapper",style:{backgroundImage:"url('"+t.good.imageUrl+"')"}}),t._v(" "),i("div",{staticClass:"good-detail"},[i("div",{staticClass:"goods-name"},[t._v(t._s(t.good.productName))]),t._v(" "),i("div",{staticClass:"goods-price"},[t._v(t._s(t.good.priceDesc||""))]),t._v(" "),i("div",{staticClass:"goods-limit"},[t._v("有效期: "+t._s(t.good.startTime)+" ~ "+t._s(t.good.endTime))]),t._v(" "),i("div",{staticClass:"goods-desc"},[t._v(t._s(t.good.productDesc))])]),t._v(" "),i("div",{staticClass:"back-home",on:{click:t.back}})]):t._e()},staticRenderFns:[]};var x=i("VU/8")(C,b,!1,function(t){i("9iFp")},"data-v-aba1a93c",null).exports,k=i("d7W4"),D={name:"goods",components:{vueWaterfallEasy:i.n(k).a},data:function(){return{goods:[],page:1,pullDownDistance:0,pageSize:10}},methods:{getData:function(){var t=this,e=this.$route.query.groupId;(function(t){var e=t.pageSize,i=t.currentPageNo,s=t.groupId;return v.a.get("http://xh.zjlhhs.com.cn/wap/haibao/product/list",{params:{pageSize:e,currentPageNo:i,groupId:s}})})({pageSize:this.pageSize,currentPageNo:this.page,groupId:e}).then(function(e){var i=e.data,s=void 0===i?{}:i,o=s.data,a=void 0===o?{}:o;if(s.success){var n=a.productList,r=void 0===n?[]:n;t.goods=t.goods.concat(r),r.length<t.pageSize&&t.$refs.waterfall&&t.$refs.waterfall.waterfallOver()}}).catch(function(t){console.error("error:",t)})},pullUp:function(){this.page=this.page+1,this.getData()},pullDownEnd:function(t){this.pullDownDistance>50&&(this.page=0,this.getData())},goDetail:function(t,e){e.index;var i=e.value,s=this.$route.query.groupId;u.bind(this)(i,"goods",s)},back:function(){this.$router.push({path:"/"})}},created:function(){this.getData()}},I={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goods"},[t.goods.length>0?i("vueWaterfallEasy",{ref:"waterfall",attrs:{imgsArr:t.goods,enablePullDownEvent:!0,srcKey:"imageUrl"},on:{click:t.goDetail,scrollReachBottom:t.pullUp,pullDownEnd:t.pullDownEnd}}):i("div",{staticClass:"empty"},[t._v(" 暂无活动商品")]),t._v(" "),i("div",{staticClass:"back-home",on:{click:t.back}})],1)},staticRenderFns:[]};var y=i("VU/8")(D,I,!1,function(t){i("YCrf")},"data-v-852cfef2",null).exports;s.a.use(n.a);var $=new n.a({routes:[{path:"/",name:"poster",component:_},{path:"/good-detail",name:"goodDetail",component:x},{path:"/goods",name:"goods",component:y}]}),W=i("rifk"),E=i.n(W);s.a.use(E.a,{dynamic:!0,dynamicDefaults:{clickToClose:!1}}),s.a.config.productionTip=!1,new s.a({el:"#app",router:$,components:{App:a},template:"<App/>"})},YCrf:function(t,e){},eOfe:function(t,e){},mOkD:function(t,e){},pWEi:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4c7f1a9d6dae6301741f.js.map