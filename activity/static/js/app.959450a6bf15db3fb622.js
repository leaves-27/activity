webpackJsonp([1],{"+WGh":function(t,e){},"819B":function(t,e){},"K+ud":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),a=i("rifk"),n=i.n(a),o=(i("+WGh"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("keep-alive",[this.$route.meta.keepAlive?e("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():e("router-view")],1)},staticRenderFns:[]});var r=i("VU/8")({name:"App",mounted:function(){}},o,!1,function(t){i("qXEf")},null,null).exports,c=i("/ocq"),d=i("Gu7T"),l=i.n(d),u=i("GQaK"),h=function(){var t=window.innerWidth,e=window.innerHeight;return"number"!=typeof t&&("CSS1Compat"==document.compatMode?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=document.body.clientWidth,e=window.body.clientHeight)),{pageWidth:t,pageHeight:e}};var g=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments[2],a=e.endTime,n=void 0===a?"":a,o=e.productId;if(n){var r=new Date(""+(t=n,t.replace(/\-/g,"/"))).getTime();if((new Date).getTime()>r)return void alert("您选择的此商品活动已过期")}this.$router.push({path:"/good-detail",query:{id:o,source:i,groupId:s}})},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"mask-layer",on:{click:function(e){return t.$emit("menuHide",!1)}}},[i("div",{staticClass:"nav-list-wrapper",class:{active:t.isVisible}},[i("p",{staticClass:"nav-title"},[t._v("目录 "),i("span",{staticClass:"close",on:{click:function(e){return t.$emit("menuHide",!1)}}})]),t._v(" "),i("div",{ref:"nav",staticClass:"nav-container"},[i("ul",{staticClass:"nav-list-content"},t._l(t.menus,function(e){return i("li",{staticClass:"nav-item",class:{active:e.id===t.selectedId},on:{click:function(i){return t.$emit("select",e.id)}}},[t._v("\n          "+t._s(e.desc)+"\n        ")])}),0)])])])},staticRenderFns:[]};var v=i("VU/8")({props:["isVisible","menus","selectedId"],computed:{},methods:{}},p,!1,function(t){i("mOkD")},"data-v-220deec2",null).exports,f=i("mtWM"),m=i.n(f),w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return m.a.get("http://xh.zjlhhs.com.cn/wap/haibao/info/get",{params:{groupId:t}})},_={name:"poster",components:{Menu:v},data:function(){return{request:{items:{isFetching:!1,isFetched:!1,data:[]}},selectedId:"1",page:1,isVisible:!1,bs:null,pageHeight:h().pageHeight,height1:0,height2:0,groupId:""}},computed:{menus:function(){var t=this,e=[];return this.request.items.data.forEach(function(i,s){var a=i.actId,n=i.actName,o=t.pages.findIndex(function(t){return 1*t.actId==1*a});e.push({id:a,desc:n,startIndex:-1===o?0:o})}),e},pages:function(){var t=[];return this.request.items.data.forEach(function(e){var i=e.pages;t.push.apply(t,l()(i))}),t},pageWidth:function(){return(1536/(2186/this.pageHeight)).toFixed(0)},pagesWidth:function(){var t=this.pages.length;return this.pageWidth*t}},methods:{getActId:function(){var t=this.$route.query.groupId,e=void 0===t?"":t;return e||this.groupId},goDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getActId(),i=t.isClick;void 0!==i&&i&&g.bind(this)(t,"",e)},goGoods:function(){var t=this.getActId();this.$router.push({path:"/goods",query:{groupId:t}})},initScroll:function(){var t=this;if(this.$refs.poster){var e=new u.a(this.$refs.poster,{scrollX:!0,probeType:3,click:!0,bounce:!0,momentumLimitDistance:5});e.on("scroll",function(e){var i=e.x,s=Math.abs(i);t.page=Math.floor(s/t.pageWidth)+1}),this.bs=e}},getBackgroundImage:function(t){return""},selectHandler:function(t){this.selectedId=t,this.isVisible=!1;var e=-1*this.menus.find(function(e){return e.id===t}).startIndex*this.pageWidth;this.bs.scrollTo(e,0)},getData:function(){var t=this,e=this.getActId();this.request.isFetching=!0,w(e).then(function(e){var i=e.data,s=void 0===i?{}:i,a=s.data,n=void 0===a?{}:a;if(s.success){var o=n.actDetailList,r=void 0===o?[]:o,c=n.groupId;t.request.items.data=r,t.request.items.isFetching=!1,t.request.items.isFetched=!0,c&&(t.groupId=c);var d=(t.menus[0]||{}).id;t.selectedId=d,t.$nextTick(function(){t.initScroll()})}}).catch(function(t){console.error("error:",t)})},onResize:function(){var t=h().pageHeight;this.pageHeight=t}},mounted:function(){window.onresize=this.onResize,this.bs||this.getData()},activated:function(){this.bs&&this.bs.refresh()}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster"},[i("div",{staticClass:"poster_main"},[!t.request.items.isFetching&&t.request.items.isFetched?i("div",{ref:"poster"},[t.request.items.data.length>0?i("div",{staticClass:"container",style:{width:t.pagesWidth+"px"}},t._l(t.pages,function(e,s){return i("div",{staticClass:"page"},t._l(e.rows,function(e,s){return i("div",{staticClass:"row",style:{flexBasis:e.height?e.height+"px":"auto",flexGrow:!e.height&&e.rowspan?e.rowspan:1,flexShrink:e.height?0:1}},t._l(e.columns,function(s,a){return i("div",{staticClass:"column",style:{flexBasis:s.width?s.width+"px":"auto",flexGrow:!s.width&&s.colspan?s.colspan:1,flexShrink:s.width?0:1}},[s.rows?i("div",{staticClass:"table"},t._l(s.rows,function(s,a){return i("div",{staticClass:"row",style:{flexBasis:s.height?e.height+"px":"auto",flexGrow:!s.height&&e.rowspan?e.rowspan:1,flexShrink:s.height?0:1}},t._l(s.columns,function(e,s){return i("div",{staticClass:"column",style:{flexBasis:e.width?e.width+"px":"auto",flexGrow:!e.width&&e.colspan?e.colspan:1,flexShrink:e.width?0:1}},[e.rows?i("div",{staticClass:"table"},t._l(e.rows,function(e,s){return i("div",{staticClass:"row",style:{flexBasis:e.height?e.height+"px":"auto",flexGrow:!e.height&&e.rowspan?e.rowspan:1,flexShrink:e.height?0:1}},t._l(e.columns,function(e,s){return i("div",{staticClass:"column",style:{flexBasis:e.width?e.width+"px":"auto",flexGrow:!e.width&&e.colspan?e.colspan:1,flexShrink:e.width?0:1}},[e.product?i("div",{staticClass:"good",on:{click:function(i){return t.goDetail(e.product)}}},[i("img",{attrs:{src:e.product.imageUrl}})]):t._e()])}),0)}),0):i("div",[e.product?i("div",{staticClass:"good",on:{click:function(i){return t.goDetail(e.product)}}},[i("img",{attrs:{src:e.product.imageUrl}})]):t._e()])])}),0)}),0):i("div",[s.product?i("div",{staticClass:"good",on:{click:function(e){return t.goDetail(s.product)}}},[i("img",{attrs:{src:s.product.imageUrl}})]):t._e()])])}),0)}),0)}),0):i("div",{staticClass:"empty"},[t._v(" 暂无活动商品 ")])]):i("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",height:"100%"}},[t._v("\n      loading...\n    ")])]),t._v(" "),i("div",{staticClass:"poster_footer"},[i("div",{staticClass:"footer_left"},[i("div",{staticClass:"footer_button menu-block",on:{click:function(e){t.isVisible=!t.isVisible}}})]),t._v(" "),i("div",{staticClass:"footer_middle"},[i("div",{staticClass:"paging"},[t._v(t._s(t.page)+"/"+t._s(t.pages.length))])]),t._v(" "),i("div",{staticClass:"footer_right"},[i("div",{staticClass:"footer_button nav-block",on:{click:t.goGoods}})])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("Menu",{attrs:{menus:t.menus,"selected-id":t.selectedId,"is-visible":t.isVisible},on:{select:t.selectHandler,menuHide:function(e){t.isVisible=!1}}})],1)],1)},staticRenderFns:[]};var C=i("VU/8")(_,b,!1,function(t){i("TTQD")},"data-v-ad6f3772",null).exports,k={name:"good-detail",data:function(){return{good:null}},methods:{back:function(){this.$router.back()}},mounted:function(){var t=this,e=this.$route.query||{};(function(t,e){return m.a.get("http://xh.zjlhhs.com.cn/wap/haibao/product/detail",{params:{productId:t,groupId:e}})})(e.id,e.groupId).then(function(e){var i=e.data,s=i.data,a=void 0===s?{}:s;i.success&&(t.good=a)}).catch(function(t){console.error("error:",t)})},beforeRouteLeave:function(t,e,i){t.meta.keepAlive=!0,i()}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.good?i("div",{staticClass:"goods"},[i("div",{staticClass:"pic-wrapper",style:{backgroundImage:"url('"+t.good.imageUrl+"')"}}),t._v(" "),i("div",{staticClass:"good-detail"},[i("div",{staticClass:"goods-name"},[t._v(t._s(t.good.productName))]),t._v(" "),i("div",{staticClass:"goods-price"},[t._v(t._s(t.good.priceDesc||""))]),t._v(" "),i("div",{staticClass:"goods-limit"},[t._v("有效期: "+t._s(t.good.startTime)+" ~ "+t._s(t.good.endTime))]),t._v(" "),i("div",{staticClass:"goods-desc"},[t._v(t._s(t.good.productDesc))])]),t._v(" "),i("div",{staticClass:"back-home",on:{click:t.back}})]):t._e()},staticRenderFns:[]};var I=i("VU/8")(k,x,!1,function(t){i("819B")},"data-v-03b18304",null).exports,y=i("d7W4"),D={name:"goods",components:{vueWaterfallEasy:i.n(y).a},data:function(){return{request:{goods:{isFetching:!1,isFetched:!1,data:[]}},page:1,pullDownDistance:0,pageSize:10}},methods:{getData:function(){var t=this,e=this.$route.query.groupId;(function(t){var e=t.pageSize,i=t.currentPageNo,s=t.groupId;return m.a.get("http://xh.zjlhhs.com.cn/wap/haibao/product/list",{params:{pageSize:e,currentPageNo:i,groupId:s}})})({pageSize:this.pageSize,currentPageNo:this.page,groupId:e}).then(function(e){var i=e.data,s=void 0===i?{}:i,a=s.data,n=void 0===a?{}:a,o=s.success;if(t.request.goods.isFetching=!0,o){var r=n.productList,c=void 0===r?[]:r;t.request.goods.data=t.request.goods.data.concat(c),c.length<t.pageSize&&t.$refs.waterfall&&t.$refs.waterfall.waterfallOver()}}).catch(function(e){t.request.goods.isFetching=!0,console.error("error:",e)})},pullUp:function(){this.page=this.page+1,this.getData()},pullDownEnd:function(t){this.pullDownDistance>50&&(this.page=0,this.getData())},goDetail:function(t,e){e.index;var i=e.value,s=this.$route.query.groupId;g.bind(this)(i,"goods",s)},back:function(){this.$router.back()}},created:function(){this.request.goods.isFetching=!1,this.getData()}},q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goods"},[t.request.goods.isFetching?i("div",{staticStyle:{height:"100%"}},[t.request.goods.data.length>0?i("vueWaterfallEasy",{ref:"waterfall",attrs:{imgsArr:t.request.goods.data,enablePullDownEvent:!0,srcKey:"imageUrl"},on:{click:t.goDetail,scrollReachBottom:t.pullUp,pullDownEnd:t.pullDownEnd}},[i("div",{attrs:{slot:"waterfall-over"},slot:"waterfall-over"})]):i("div",{staticClass:"empty"},[t._v(" 暂无活动商品")])],1):t._e(),t._v(" "),i("div",{staticClass:"back-home",on:{click:t.back}})])},staticRenderFns:[]};var $=i("VU/8")(D,q,!1,function(t){i("K+ud")},"data-v-09f2be86",null).exports;s.a.use(c.a);var F=new c.a({routes:[{path:"/",name:"poster",component:C,meta:{keepAlive:!0}},{path:"/good-detail",name:"goodDetail",component:I},{path:"/goods",name:"goods",component:$}]});s.a.use(n.a,{dynamic:!0,dynamicDefaults:{clickToClose:!1}}),s.a.config.productionTip=!1,new s.a({el:"#app",router:F,components:{App:r},template:"<App/>"})},TTQD:function(t,e){},mOkD:function(t,e){},qXEf:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.959450a6bf15db3fb622.js.map