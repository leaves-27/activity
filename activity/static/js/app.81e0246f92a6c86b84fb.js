webpackJsonp([1],{"/Lch":function(t,e){},"6md+":function(t,e){},D3AW:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("keep-alive",{attrs:{exclude:"goods"}},[e("router-view")],1)],1)},staticRenderFns:[]};var o=i("VU/8")({name:"App"},n,!1,function(t){i("t4SM")},null,null).exports,a=i("/ocq"),r=i("Gu7T"),c=i.n(r),l=i("GQaK"),d=function(){var t=window.innerWidth,e=window.innerHeight;return"number"!=typeof t&&("CSS1Compat"==document.compatMode?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=document.body.clientWidth,e=window.body.clientHeight)),{pageWidth:t,pageHeight:e}},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t.endTime,s=void 0===i?"":i,n=t.productId;if(s){var o=new Date(s).getTime();if((new Date).getTime()>o)return void alert("您选择的此商品活动已过期")}this.$router.push({path:"/good-detail",query:{id:n,source:e}})},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"mask-layer",on:{click:function(e){return t.$emit("menuHide",!1)}}},[i("div",{staticClass:"nav-list-wrapper",class:{active:t.isVisible}},[i("p",{staticClass:"nav-title"},[t._v("目录 "),i("span",{staticClass:"close",on:{click:function(e){return t.$emit("menuHide",!1)}}})]),t._v(" "),i("div",{ref:"nav",staticClass:"nav-container"},[i("ul",{staticClass:"nav-list-content"},t._l(t.menus,function(e){return i("li",{staticClass:"nav-item",class:{active:e.id===t.selectedId},on:{click:function(i){return t.$emit("select",e.id)}}},[t._v("\n          "+t._s(e.desc)+"\n        ")])}),0)])])])},staticRenderFns:[]};var p=i("VU/8")({props:["isVisible","menus","selectedId"],computed:{},methods:{}},h,!1,function(t){i("mOkD")},"data-v-220deec2",null).exports,g=i("mtWM"),v=i.n(g),f=function(){return v.a.get("http://xh.zjlhhs.com.cn/wap/haibao/info/get")},m={name:"poster",components:{Menu:p},data:function(){return{originData:[],selectedId:"1",page:1,isVisible:!1,bs:null,pageHeight:d().pageHeight,height1:0,height2:0}},computed:{menus:function(){var t=this,e=[];return this.originData.forEach(function(i,s){var n=i.actId,o=i.actName,a=t.pages.findIndex(function(t){return 1*t.actId==1*n});e.push({id:n,desc:o,startIndex:-1===a?0:a})}),e},pages:function(){var t=[];return this.originData.forEach(function(e){var i=e.pages;t.push.apply(t,c()(i))}),t},pageWidth:function(){return(1536/(2186/this.pageHeight)).toFixed(0)},pagesWidth:function(){var t=this.pages.length;return this.pageWidth*t}},methods:{goDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.bind(this)(t)},goGoods:function(){this.$router.push({path:"/goods"})},initScroll:function(){var t=this;if(this.$refs.poster){var e=new l.a(this.$refs.poster,{scrollX:!0,probeType:3,click:!0,bounce:!0,momentumLimitDistance:5});e.on("scroll",function(e){var i=e.x,s=Math.abs(i);t.page=Math.floor(s/t.pageWidth)+1}),this.bs=e}},getBackgroundImage:function(t){return""},selectHandler:function(t){this.selectedId=t,this.isVisible=!1;var e=-1*this.menus.find(function(e){return e.id===t}).startIndex*this.pageWidth;this.bs.scrollTo(e,0)},getData:function(){var t=this;f().then(function(e){var i=e.data,s=void 0===i?{}:i,n=s.data,o=void 0===n?{}:n;if(s.success){var a=o.actDetailList,r=void 0===a?[]:a;t.originData=r,t.initScroll();var c=(t.menus[0]||{}).id;t.selectedId=c}}).catch(function(t){console.error("error:",t)})},onResize:function(){var t=d().pageHeight;this.pageHeight=t}},mounted:function(){window.onresize=this.onResize,this.bs||this.getData()}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster"},[i("div",{ref:"poster",staticClass:"poster_main"},[i("div",{staticClass:"container",style:{width:t.pagesWidth+"px"}},t._l(t.pages,function(e,s){return i("div",{staticClass:"page"},t._l(e.rows,function(e,s){return i("div",{staticClass:"row",style:{flexBasis:e.height?e.height+"px":"auto",flexGrow:!e.height&&e.rowspan?e.rowspan:1,flexShrink:e.height?0:1}},t._l(e.columns,function(s,n){return i("div",{staticClass:"column",style:{flexBasis:s.width?s.width+"px":"auto",flexGrow:!s.width&&s.colspan?s.colspan:1,flexShrink:s.width?0:1}},[s.rows?i("div",{staticClass:"table"},t._l(s.rows,function(s,n){return i("div",{staticClass:"row",style:{flexBasis:s.height?e.height+"px":"auto",flexGrow:!s.height&&e.rowspan?e.rowspan:1,flexShrink:s.height?0:1}},t._l(s.columns,function(e,s){return i("div",{staticClass:"column",style:{flexBasis:e.width?e.width+"px":"auto",flexGrow:!e.width&&e.colspan?e.colspan:1,flexShrink:e.width?0:1}},[e.rows?i("div",{staticClass:"table"},t._l(e.rows,function(e,s){return i("div",{staticClass:"row",style:{flexBasis:e.height?e.height+"px":"auto",flexGrow:!e.height&&e.rowspan?e.rowspan:1,flexShrink:e.height?0:1}},t._l(e.columns,function(e,s){return i("div",{staticClass:"column",style:{flexBasis:e.width?e.width+"px":"auto",flexGrow:!e.width&&e.colspan?e.colspan:1,flexShrink:e.width?0:1}},[e.product?i("div",{staticClass:"good",on:{click:function(i){return t.goDetail(e.product.productId)}}},[i("img",{attrs:{src:e.product.imageUrl}})]):t._e()])}),0)}),0):i("div",[e.product?i("div",{staticClass:"good",on:{click:function(i){return t.goDetail(e.product.productId)}}},[i("img",{attrs:{src:e.product.imageUrl}})]):t._e()])])}),0)}),0):i("div",[s.product?i("div",{staticClass:"good",on:{click:function(e){return t.goDetail(s.product)}}},[i("img",{attrs:{src:s.product.imageUrl}})]):t._e()])])}),0)}),0)}),0)]),t._v(" "),i("div",{staticClass:"poster_footer"},[i("div",{staticClass:"footer_left"},[i("div",{staticClass:"footer_button menu-block",on:{click:function(e){t.isVisible=!t.isVisible}}})]),t._v(" "),i("div",{staticClass:"footer_middle"},[i("div",{staticClass:"paging"},[t._v(t._s(t.page)+"/"+t._s(t.pages.length))])]),t._v(" "),i("div",{staticClass:"footer_right"},[i("div",{staticClass:"footer_button nav-block",on:{click:t.goGoods}})])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("Menu",{attrs:{menus:t.menus,"selected-id":t.selectedId,"is-visible":t.isVisible},on:{select:t.selectHandler,menuHide:function(e){t.isVisible=!1}}})],1)],1)},staticRenderFns:[]};var _=i("VU/8")(m,w,!1,function(t){i("6md+")},"data-v-5dad46e0",null).exports,b={name:"good-detail",data:function(){return{good:null}},methods:{back:function(){var t=(this.$route.query||{}).source;"goods"===(void 0===t?"":t)?this.$router.push({path:"/goods"}):this.$router.push({path:"/"})}},mounted:function(){var t=this;console.log("================test:");var e,i=(this.$route.query||{}).id;(e=i,v.a.get("http://xh.zjlhhs.com.cn/wap/haibao/product/detail?productId="+e)).then(function(e){var i=e.data,s=i.data,n=void 0===s?{}:s;i.success&&(t.good=n)}).catch(function(t){console.error("error:",t)})}},C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.good?i("div",{staticClass:"goods"},[i("div",{staticClass:"pic-wrapper"},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.good.imageUrl,alt:""}})]),t._v(" "),i("div",{staticClass:"goods-name"},[t._v(t._s(t.good.productName))]),t._v(" "),i("div",{staticClass:"goods-price"},[t._v(t._s(t.good.price))]),t._v(" "),i("div",{staticClass:"goods-limit"},[t._v("有效期:"+t._s(t.good.endTime))]),t._v(" "),i("div",{staticClass:"back-home",on:{click:t.back}})]):t._e()},staticRenderFns:[]};var x=i("VU/8")(b,C,!1,function(t){i("/Lch")},"data-v-9272bc58",null).exports,D=i("d7W4"),k={name:"goods",components:{vueWaterfallEasy:i.n(D).a},data:function(){return{goods:[],page:1,pullDownDistance:0}},methods:{getData:function(){var t,e,i=this;(t=this.page,e=20,v.a.get("http://xh.zjlhhs.com.cn/wap/haibao/product/list",{params:{pageSize:t,currentPageNo:e}})).then(function(t){var e=t.data,s=void 0===e?{}:e,n=s.data,o=void 0===n?{}:n;if(s.success){var a=o.productList,r=void 0===a?[]:a;i.goods=i.goods.concat(r),i.page++}}).catch(function(t){console.error("error:",t)})},pullDownMove:function(t){this.pullDownDistance=t},pullDownEnd:function(t){console.log("pullDownEnd"),this.pullDownDistance>50&&alert("下拉刷新"),this.pullDownDistance=0},goDetail:function(t){u.bind(this)(t,"goods")},back:function(){this.$router.push({path:"/"})}},created:function(){this.getData()}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goods"},[i("vueWaterfallEasy",{ref:"waterfall",attrs:{imgsArr:t.goods,enablePullDownEvent:!0},on:{scrollReachBottom:t.getData},scopedSlots:t._u([{key:"default",fn:function(e){return i("div",{staticClass:"frame"},[i("img",{staticClass:"img",attrs:{src:e.value.imageUrl},on:{click:function(i){return t.goDetail(e.value)}}})])}}])}),t._v(" "),i("div",{staticClass:"back-home",on:{click:t.back}})],1)},staticRenderFns:[]};var W=i("VU/8")(k,y,!1,function(t){i("D3AW")},"data-v-1b3a10c6",null).exports;s.a.use(a.a);var $=new a.a({routes:[{path:"/",name:"poster",component:_},{path:"/good-detail",name:"goodDetail",component:x},{path:"/goods",name:"goods",component:W}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:$,components:{App:o},template:"<App/>"})},mOkD:function(t,e){},t4SM:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.81e0246f92a6c86b84fb.js.map