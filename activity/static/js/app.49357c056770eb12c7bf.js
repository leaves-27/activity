webpackJsonp([1],{"+WGh":function(t,e){},KUvc:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW");i("+WGh");(/eruda=true/.test(window.location)||"true"==localStorage.getItem("active-eruda"))&&(document.write('<script src="//cdn.bootcss.com/eruda/1.5.2/eruda.min.js"><\/script>'),document.write("<script>eruda.init();<\/script>"));var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=i("VU/8")({name:"App",mounted:function(){}},n,!1,function(t){i("KUvc")},null,null).exports,a=i("/ocq"),r=i("Gu7T"),c=i.n(r),d=i("GQaK"),l=function(){var t=window.innerWidth,e=window.innerHeight;return"number"!=typeof t&&("CSS1Compat"==document.compatMode?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=document.body.clientWidth,e=window.body.clientHeight)),{pageWidth:t,pageHeight:e}},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments[2],s=t.endTime,n=void 0===s?"":s,o=t.productId;if(n){var a=new Date(n).getTime();if((new Date).getTime()>a)return void alert("您选择的此商品活动已过期")}this.$router.push({path:"/good-detail",query:{id:o,source:e,groupId:i}})},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"mask-layer",on:{click:function(e){return t.$emit("menuHide",!1)}}},[i("div",{staticClass:"nav-list-wrapper",class:{active:t.isVisible}},[i("p",{staticClass:"nav-title"},[t._v("目录 "),i("span",{staticClass:"close",on:{click:function(e){return t.$emit("menuHide",!1)}}})]),t._v(" "),i("div",{ref:"nav",staticClass:"nav-container"},[i("ul",{staticClass:"nav-list-content"},t._l(t.menus,function(e){return i("li",{staticClass:"nav-item",class:{active:e.id===t.selectedId},on:{click:function(i){return t.$emit("select",e.id)}}},[t._v("\n          "+t._s(e.desc)+"\n        ")])}),0)])])])},staticRenderFns:[]};var p=i("VU/8")({props:["isVisible","menus","selectedId"],computed:{},methods:{}},h,!1,function(t){i("mOkD")},"data-v-220deec2",null).exports,g=i("mtWM"),v=i.n(g),f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.a.get("http://xh.zjlhhs.com.cn/wap/haibao/info/get",{params:{groupId:t}})},m={name:"poster",components:{Menu:p},data:function(){return{originData:[],selectedId:"1",page:1,isVisible:!1,bs:null,pageHeight:l().pageHeight,height1:0,height2:0}},computed:{menus:function(){var t=this,e=[];return this.originData.forEach(function(i,s){var n=i.actId,o=i.actName,a=t.pages.findIndex(function(t){return 1*t.actId==1*n});e.push({id:n,desc:o,startIndex:-1===a?0:a})}),e},pages:function(){var t=[];return this.originData.forEach(function(e){var i=e.pages;t.push.apply(t,c()(i))}),t},pageWidth:function(){return(1536/(2186/this.pageHeight)).toFixed(0)},pagesWidth:function(){var t=this.pages.length;return this.pageWidth*t}},methods:{getActId:function(){var t=this.$route.query.groupId,e=void 0===t?"":t;return e||(localStorage.getItem("groupId")||"")},goDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getActId();u.bind(this)(t,"",e)},goGoods:function(){var t=this.getActId();this.$router.push({path:"/goods",query:{groupId:t}})},initScroll:function(){var t=this;if(this.$refs.poster){var e=new d.a(this.$refs.poster,{scrollX:!0,probeType:3,click:!0,bounce:!0,momentumLimitDistance:5});e.on("scroll",function(e){var i=e.x,s=Math.abs(i);t.page=Math.floor(s/t.pageWidth)+1}),this.bs=e}},getBackgroundImage:function(t){return""},selectHandler:function(t){this.selectedId=t,this.isVisible=!1;var e=-1*this.menus.find(function(e){return e.id===t}).startIndex*this.pageWidth;this.bs.scrollTo(e,0)},getData:function(){var t=this,e=this.getActId();f(e).then(function(e){var i=e.data,s=void 0===i?{}:i,n=s.data,o=void 0===n?{}:n;if(s.success){var a=o.actDetailList,r=void 0===a?[]:a,c=o.groupId;t.originData=r,c&&localStorage.setItem("groupId",c),t.initScroll();var d=(t.menus[0]||{}).id;t.selectedId=d}}).catch(function(t){console.error("error:",t)})},onResize:function(){var t=l().pageHeight;this.pageHeight=t}},mounted:function(){window.onresize=this.onResize,this.bs||this.getData()}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"poster"},[i("div",{ref:"poster",staticClass:"poster_main"},[t.pages.length>0?i("div",{staticClass:"container",style:{width:t.pagesWidth+"px"}},t._l(t.pages,function(e,s){return i("div",{staticClass:"page"},t._l(e.rows,function(e,s){return i("div",{staticClass:"row",style:{flexBasis:e.height?e.height+"px":"auto",flexGrow:!e.height&&e.rowspan?e.rowspan:1,flexShrink:e.height?0:1}},t._l(e.columns,function(s,n){return i("div",{staticClass:"column",style:{flexBasis:s.width?s.width+"px":"auto",flexGrow:!s.width&&s.colspan?s.colspan:1,flexShrink:s.width?0:1}},[s.rows?i("div",{staticClass:"table"},t._l(s.rows,function(s,n){return i("div",{staticClass:"row",style:{flexBasis:s.height?e.height+"px":"auto",flexGrow:!s.height&&e.rowspan?e.rowspan:1,flexShrink:s.height?0:1}},t._l(s.columns,function(e,s){return i("div",{staticClass:"column",style:{flexBasis:e.width?e.width+"px":"auto",flexGrow:!e.width&&e.colspan?e.colspan:1,flexShrink:e.width?0:1}},[e.rows?i("div",{staticClass:"table"},t._l(e.rows,function(e,s){return i("div",{staticClass:"row",style:{flexBasis:e.height?e.height+"px":"auto",flexGrow:!e.height&&e.rowspan?e.rowspan:1,flexShrink:e.height?0:1}},t._l(e.columns,function(e,s){return i("div",{staticClass:"column",style:{flexBasis:e.width?e.width+"px":"auto",flexGrow:!e.width&&e.colspan?e.colspan:1,flexShrink:e.width?0:1}},[e.product?i("div",{staticClass:"good",on:{click:function(i){return t.goDetail(e.product.productId)}}},[i("img",{attrs:{src:e.product.imageUrl}})]):t._e()])}),0)}),0):i("div",[e.product?i("div",{staticClass:"good",on:{click:function(i){return t.goDetail(e.product.productId)}}},[i("img",{attrs:{src:e.product.imageUrl}})]):t._e()])])}),0)}),0):i("div",[s.product?i("div",{staticClass:"good",on:{click:function(e){return t.goDetail(s.product)}}},[i("img",{attrs:{src:s.product.imageUrl}})]):t._e()])])}),0)}),0)}),0):i("div",{staticClass:"empty"},[t._v(" 暂无活动商品 ")])]),t._v(" "),i("div",{staticClass:"poster_footer"},[i("div",{staticClass:"footer_left"},[i("div",{staticClass:"footer_button menu-block",on:{click:function(e){t.isVisible=!t.isVisible}}})]),t._v(" "),i("div",{staticClass:"footer_middle"},[i("div",{staticClass:"paging"},[t._v(t._s(t.page)+"/"+t._s(t.pages.length))])]),t._v(" "),i("div",{staticClass:"footer_right"},[i("div",{staticClass:"footer_button nav-block",on:{click:t.goGoods}})])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("Menu",{attrs:{menus:t.menus,"selected-id":t.selectedId,"is-visible":t.isVisible},on:{select:t.selectHandler,menuHide:function(e){t.isVisible=!1}}})],1)],1)},staticRenderFns:[]};var _=i("VU/8")(m,w,!1,function(t){i("YILp")},"data-v-94a12be2",null).exports,b={name:"good-detail",data:function(){return{good:null}},methods:{back:function(){var t=(this.$route.query||{}).source;"goods"===(void 0===t?"":t)?this.$router.push({path:"/goods"}):this.$router.push({path:"/"})}},mounted:function(){var t=this,e=this.$route.query||{};(function(t,e){return v.a.get("http://xh.zjlhhs.com.cn/wap/haibao/product/detail",{params:{productId:t,groupId:e}})})(e.id,e.groupId).then(function(e){var i=e.data,s=i.data,n=void 0===s?{}:s;i.success&&(t.good=n)}).catch(function(t){console.error("error:",t)})}},C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.good?i("div",{staticClass:"goods"},[i("div",{staticClass:"pic-wrapper"},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.good.imageUrl,alt:""}})]),t._v(" "),i("div",{staticClass:"goods-name"},[t._v(t._s(t.good.productName))]),t._v(" "),i("div",{staticClass:"goods-price"},[t._v(t._s(t.good.price))]),t._v(" "),i("div",{staticClass:"goods-limit"},[t._v("有效期:"+t._s(t.good.endTime))]),t._v(" "),i("div",{staticClass:"back-home",on:{click:t.back}})]):t._e()},staticRenderFns:[]};var x=i("VU/8")(b,C,!1,function(t){i("eS8x")},"data-v-665112b5",null).exports,I=i("d7W4"),D={name:"goods",components:{vueWaterfallEasy:i.n(I).a},data:function(){return{goods:[],page:1,pullDownDistance:0}},methods:{getData:function(t){var e=this;(function(t,e,i){return v.a.get("http://xh.zjlhhs.com.cn/wap/haibao/product/list",{params:{pageSize:t,currentPageNo:e,groupId:i}})})(this.page,20,t).then(function(t){var i=t.data,s=void 0===i?{}:i,n=s.data,o=void 0===n?{}:n;if(s.success){var a=o.productList,r=void 0===a?[]:a;e.goods=e.goods.concat(r),e.page++}}).catch(function(t){console.error("error:",t)})},pullDownMove:function(t){this.pullDownDistance=t},pullDownEnd:function(t){console.log("pullDownEnd"),this.pullDownDistance>50&&alert("下拉刷新"),this.pullDownDistance=0},goDetail:function(t){var e=this.$route.query.groupId;u.bind(this)(t,"goods",e)},back:function(){this.$router.push({path:"/"})}},created:function(){var t=this.$route.query.groupId;this.getData(t)}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goods"},[t.goods.length>0?i("vueWaterfallEasy",{ref:"waterfall",attrs:{imgsArr:t.goods,enablePullDownEvent:!0},on:{scrollReachBottom:t.getData},scopedSlots:t._u([{key:"default",fn:function(e){return i("div",{staticClass:"frame"},[i("img",{staticClass:"img",attrs:{src:e.value.imageUrl},on:{click:function(i){return t.goDetail(e.value)}}})])}}],null,!1,2219891974)}):i("div",{staticClass:"empty"},[t._v(" 暂无活动商品 ")]),t._v(" "),i("div",{staticClass:"back-home",on:{click:t.back}})],1)},staticRenderFns:[]};var y=i("VU/8")(D,k,!1,function(t){i("vpND")},"data-v-49c2d0fa",null).exports;s.a.use(a.a);var $=new a.a({routes:[{path:"/",name:"poster",component:_},{path:"/good-detail",name:"goodDetail",component:x},{path:"/goods",name:"goods",component:y}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:$,components:{App:o},template:"<App/>"})},YILp:function(t,e){},eS8x:function(t,e){},mOkD:function(t,e){},vpND:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.49357c056770eb12c7bf.js.map